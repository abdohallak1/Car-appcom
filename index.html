<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø­Ù„Ø§Ù‚ Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:"Segoe UI",Tahoma;
  background:#f4f6f8;
}
header{
  background:linear-gradient(135deg,#000,#1a1a1a,#333);
  color:#fff;
  padding:20px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 4px 15px rgba(0,0,0,.4);
}
header h1{margin:0;font-size:22px;}
header .contact{font-size:14px;}
button{
  padding:8px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
  transition:.25s;
}
button:hover{opacity:.85;transform:scale(1.03);}
.btn-login{background:#0d6efd;color:#fff;}
.btn-logout{background:#6c757d;color:#fff;display:none;}
.btn-add{background:#198754;color:#fff;margin:15px;}
.btn-delete{background:#dc3545;color:#fff;}
.container{padding:20px;}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:20px;
}
.card{
  background:#fff;
  border-radius:14px;
  box-shadow:0 8px 25px rgba(0,0,0,.12);
  overflow:hidden;
  transition:.3s;
}
.card:hover{
  transform:translateY(-6px);
  box-shadow:0 14px 35px rgba(0,0,0,.2);
}
.card img{width:100%;height:180px;object-fit:cover;}
.card .info{padding:15px;}
.card h3{margin:0 0 5px}
.card p{margin:4px 0;font-size:14px}
.hidden{display:none;}
form{
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  margin-bottom:20px;
}
input,select{width:100%;padding:8px;margin:6px 0;}
#loginModal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;z-index:1000;
}
#loginForm{
  background:#fff;padding:25px;border-radius:10px;width:300px;text-align:center;
  box-shadow:0 8px 25px rgba(0,0,0,.3);
}
#loginForm input{width:100%;padding:10px;margin:8px 0;}
#loginForm button{width:100%;margin-top:10px;}
.filterBox{
  display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap;
}
.filterBox select, .filterBox button{
  padding:6px;
  border-radius:5px;
  border:1px solid #ccc;
}
</style>
</head>

<body>

<header>
  <div>
    <h1>Ø§Ù„Ø­Ù„Ø§Ù‚ Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©</h1>
    <div class="contact">ğŸ“ 0959103074 | ğŸ“§ info@alhallakcars.com</div>
  </div>
  <div>
    <button class="btn-login" onclick="showLoginModal()">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
    <button class="btn-logout" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
  </div>
</header>

<div class="container">

<button class="btn-add" onclick="toggleForm()">â• Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©</button>

<form id="carForm" class="hidden">
  <input id="brand" placeholder="Ø§Ù„Ù…Ø§Ø±ÙƒØ©">
  <input id="model" placeholder="Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„">
  <input id="year" type="number" placeholder="Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹">
  <input id="price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <select id="type">
    <option value="Ø¨ÙŠØ¹">Ø¨ÙŠØ¹</option>
    <option value="Ø¥ÙŠØ¬Ø§Ø±">Ø¥ÙŠØ¬Ø§Ø±</option>
  </select>
  <input id="image" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
  <button type="button" class="btn-add" onclick="addCar()">Ø­ÙØ¸</button>
</form>

<div class="filterBox">
  <select id="filterBrand"><option value="">ÙƒÙ„ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª</option></select>
  <select id="filterModel"><option value="">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</option></select>
  <select id="filterYear"><option value="">ÙƒÙ„ Ø§Ù„Ø³Ù†ÙˆØ§Øª</option></select>
  <select id="filterType"><option value="">Ø¨ÙŠØ¹/Ø¥ÙŠØ¬Ø§Ø±</option>
    <option value="Ø¨ÙŠØ¹">Ø¨ÙŠØ¹</option><option value="Ø¥ÙŠØ¬Ø§Ø±">Ø¥ÙŠØ¬Ø§Ø±</option>
  </select>
  <button onclick="showAllCars()">Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</button>
</div>

<div class="grid" id="cars"></div>

</div>

<div id="loginModal">
  <form id="loginForm">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button type="button" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <button type="button" onclick="guestLogin()">Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±</button>
  </form>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "PUT_YOUR_KEY",
  authDomain: "PUT_YOUR_DOMAIN",
  databaseURL: "PUT_YOUR_DB_URL",
  projectId: "PUT_YOUR_PROJECT_ID",
  appId: "PUT_YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const auth = getAuth(app);

let isAdmin = false;
let allCars=[];

function showLoginModal(){document.getElementById("loginModal").style.display="flex";}

window.login = () => {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  signInWithEmailAndPassword(auth,email,password)
    .then(()=> {
      alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");
      document.getElementById("loginModal").style.display="none";
    })
    .catch(()=> alert("Ø®Ø·Ø£"));
};

window.guestLogin = () => {
  alert("ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ²Ø§Ø¦Ø±");
  isAdmin=false;
  document.getElementById("loginModal").style.display="none";
  loadCars();
};

window.logout = () => signOut(auth);

onAuthStateChanged(auth,user=>{
  isAdmin = !!user;
  document.querySelector(".btn-login").style.display = user?"none":"inline-block";
  document.querySelector(".btn-logout").style.display = user?"inline-block":"none";
  document.getElementById("loginModal").style.display = user?"none":"flex";
  loadCars();
});

window.toggleForm = () => {document.getElementById("carForm").classList.toggle("hidden");};

window.addCar = () => {
  const car = {
    brand: brand.value,
    model: model.value,
    year: year.value,
    price: price.value,
    type: type.value,
    image: image.value || "https://i.imgur.com/8YqGZ9G.jpg"
  };
  push(ref(db, "cars"), car);
  carForm.classList.add("hidden");
  carForm.reset();
};

function updateFilterOptions(){
  const brands=[...new Set(allCars.map(c=>c.brand))];
  const models=[...new Set(allCars.map(c=>c.model))];
  const years=[...new Set(allCars.map(c=>c.year))];
  const bSel=document.getElementById("filterBrand");
  const mSel=document.getElementById("filterModel");
  const ySel=document.getElementById("filterYear");
  bSel.innerHTML='<option value="">ÙƒÙ„ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª</option>'+brands.map(b=>`<option value="${b}">${b}</option>`).join('');
  mSel.innerHTML='<option value="">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</option>'+models.map(m=>`<option value="${m}">${m}</option>`).join('');
  ySel.innerHTML='<option value="">ÙƒÙ„ Ø§Ù„Ø³Ù†ÙˆØ§Øª</option>'+years.map(y=>`<option value="${y}">${y}</option>`).join('');
}

function showAllCars(){
  document.getElementById("filterBrand").value="";
  document.getElementById("filterModel").value="";
  document.getElementById("filterYear").value="";
  document.getElementById("filterType").value="";
  displayCars(allCars);
}

function displayCars(carsList){
  const grid=cars;
  grid.innerHTML="";
  carsList.forEach(c=>{
    grid.innerHTML+=`
    <div class="card">
      <img src="${c.image}">
      <div class="info">
        <h3>${c.brand} ${c.model}</h3>
        <p>ğŸ“… ${c.year}</p>
        <p>ğŸ’° ${c.price}$</p>
        <p>ğŸš— ${c.type}</p>
        ${isAdmin?`<button class="btn-delete" onclick="deleteCar('${c.key}')">Ø­Ø°Ù</button>`:""}
      </div>
    </div>`;
  });
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª
function loadCars(){
  onValue(ref(db,"cars"),snap=>{
    allCars=[];
    snap.forEach(c=>{
      const car=c.val();
      car.key=c.key;
      allCars.push(car);
    });
    updateFilterOptions();
    displayCars(allCars);
  });
}

// Ø­Ø°Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø©
window.deleteCar=id=>{if(!isAdmin) return;if(confirm("ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°ÙØŸ")) remove(ref(db,"cars/"+id));};

// ÙÙ„ØªØ± Ø­ÙŠ Ù…Ø¨Ø§Ø´Ø±
["filterBrand","filterModel","filterYear","filterType"].forEach(fid=>{
  document.getElementById(fid).addEventListener("change",()=>{
    let fBrand=document.getElementById("filterBrand").value;
    let fModel=document.getElementById("filterModel").value;
    let fYear=document.getElementById("filterYear").value;
    let fType=document.getElementById("filterType").value;
    let filtered=allCars.filter(c=>
      (!fBrand||c.brand==fBrand) &&
      (!fModel||c.model==fModel) &&
      (!fYear||c.year==fYear) &&
      (!fType||c.type==fType)
    );
    displayCars(filtered);
  });
});
</script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBXb74zSU2zXHXs5dklsRw3YeDZJmoWQhg",
  authDomain: "car-app-1e764.firebaseapp.com",
  databaseURL: "https://car-app-1e764-default-rtdb.firebaseio.com",
  projectId: "car-app-1e764",
  storageBucket: "car-app-1e764.firebasestorage.app",
  messagingSenderId: "690409691234",
  appId: "1:690409691234:web:5444aed103a90a225f193b"
};const firebaseConfig = {
  apiKey: "AIzaSyBXb74zSU2zXHXs5dklsRw3YeDZJmoWQhg",
  authDomain: "car-app-1e764.firebaseapp.com",
  databaseURL: "https://car-app-1e764-default-rtdb.firebaseio.com",
  projectId: "car-app-1e764",
  storageBucket: "car-app-1e764.firebasestorage.app",
  messagingSenderId: "690409691234",
  appId: "1:690409691234:web:5444aed103a90a225f193b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
window.login = () => {
  const email = prompt("Email:");
  const password = prompt("Password:");
  signInWithEmailAndPassword(auth, email, password)
    .then(() => alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"))
    .catch(() => alert("ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"));
};

// Ù…Ø¹Ø±ÙØ© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
window.isAdmin = false;
onAuthStateChanged(auth, user => {
  window.isAdmin = !!user;
});
</script>
</body>
</html>